<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuore for WinForms</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="./assets/cui logo.svg">
</head>

<body>
    <header>
        <div class="logo">CuoreUI</div>
        <button class="burger-menu burger" aria-label="Toggle menu">
            â˜°
        </button>
        <div class="nav-links">
            <nav class="nav-container">
                <a href="index.html">Homepage</a>
                <a class="download-nav" href="https://www.nuget.org/packages/CuoreUI.Winforms/">Download</a>
                <a href="compare.html">Compare</a>
                <a href="contact.html">Contact</a>
            </nav>
        </div>
    </header>
    
    <script src="./burgerMenu.js" defer></script>
    
    <!-- Existing Hero Section -->
    <div class="hero mainpage-hero">
        <h1 class="cuore-special-text">Cuore <span>for WinForms.</span></h1>

        <p>THE WinForms UI & UX Framework.</p>
        <p class="tagline">"Real art requires a heart."</p>
        <p class="downloads-count">We are working on getting the downloads count..</p>
        <div class="buttons">
            <button class="btn btn-github" onclick="document.location= 'https://github.com/1Kxhu/CuoreUI'">
                <img src="./assets/github.svg" alt="GitHub Icon" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;">
                <span class="full-text">GitHub Repository</span>
                <span class="short-text">GitHub</span>
            </button>
            
            <button class="btn btn-nuget" onclick="document.location= 'https://www.nuget.org/packages/CuoreUI.Winforms'">
                <img src="./assets/nuget.svg" alt="NuGet Icon" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;">
                <span class="full-text">NuGet Package</span>
                <span class="short-text">NuGet</span>
            </button>
            
            
        </div>
    </div>

    <!-- New Features Section -->
    <section class="features">
        <div class="features-container">
            <div class="feature-item">
                <h3>Sleek</h3>
                <img draggable="false" src="./assets/features/rounding.svg" alt="Feature 1">
            </div>
            <div class="feature-item">
                <h3>Innovative</h3>
                <img draggable="false" src="./assets/features/architecture.svg" alt="Feature 2">
            </div>
            <div class="feature-item">
                <h3>Open-Source</h3>
                <img draggable="false" src="./assets/features/github-pixelated.svg" alt="Feature 3">
            </div>
        </div>
    </section>

    <footer>
        <p class="footer-text-downloads" id="globalmessage"></p>
        <p class="footer-text">2024 CuoreUI, no rights reserved. Licensed under Unlicense.</p>
    </footer>

    <script src="./globalMessage.js" defer></script>

    <script>
        let taglines = [
            /* thanks pluto */
            // laughing at high prices or even that the product is paid at all
            "Creativity never evolves from money.",
            "The charts look amazing, try them!",
            "Embrace your creativity, not your wallet.",
            "Creativity should not have a price tag.",
            "Creativity doesn't carry a price tag.",
            "You don't need a dollar to be creative.",
            "Consumers have finances too.",
            "We won't ever take your money.",
            "Initiate lawsuit prevention plan!!",
            "I am not expecting a lawsuit anytime soon..",
            "We don't accept card, oh You meant creativity?",
            "Shhh.. I don't want to pay them either..",
            "You can't put a price on creativity, right? RIGHT??",
            "We don't run our code through a confuser.. unlike some libraries..",
            "People from all around the globe use Cuore, including You!",
            "I promise, I won't turn this into a paid product.",
            "Your projects have value, even when they're free.",
            "CuoreUI isn't affordable, it's free.",
            "No need to credit CuoreUI by the way!",
            "Even the holidays can be hard, take some time ðŸ«‚.",
            "Cuore's updates can wait. This holiday season, focus on what makes You happy.",
            "'Why buy when you can make your own?'",
            "Mathematically- CuoreUI is infinitely cheaper..",
            "We are about giving, not taking.",
            "No refunds! Oh wait, CuoreUI is free.",
            "No updates until post-christmas, for now go enjoy yourself.",
            "Telerik to refund me for his outdated UI library.",
            "Siticone, Guna - Your license managers look oddly similar..",
            "Siticone, you call that a dropdown?",
            "Bunifu ends with 'fu' - why not switch to Cuore?",
            "Telerik, your website is decent, why not the library?",
        
            // cuore / heart word play (cuore stands for heart in italian)
            // kind messages to the visitor
            // relief tensions if another winforms ui library owner is seeing this ðŸ‘€
            "Cuore stands for the heart.",
            "Our price won't cause a heart attack.",
            "All designers have a heart.",
            "We are the heart of creativity.",
            "Real art requires a heart.",
            "You are the heart of CuoreUI.",
            "You realise, You fuel this project, right? :)",
            "We bring the canvas, You the heart.",
            "I love You!! - a message from the developer",
            "We inspire You and You inspire us!",
            "Cuore translates to heart in italian!",
            "They speak to your money, not your heart!",
            "Do we resonate with you yet?",
            "(Guna, Bunifu, Siticone, we love you too.)",
            "We appreciate your work, Bunifu.",
            "Without Guna, we wouldn't have had the idea to do this..",
            "Siticone, your UI design is awesome too..",
            "I would be using GunaUI until I made this library!",
            "This library grew because You were interested.",
            "Your feedback matters, I actually listen.", // to anyone reading this javascript code - yes, i do think of, and write all these. anyway love you muah
            "We are against paid products, but they were here before CuoreUI..",
            "Being paid doesn't mean you are greedy.",
            "It may be a paid product, but the developers might be passionate.",
            "It's not wrong to monetise your work, that's how you make money.",
            "You should monetise your work, it has value too.",
            "Knock knock, who's there? A caring developer.",
            "What did the developer say? 'Check out CuoreUI.'",
            "I was told to stop trying to modernize an outdated technology.. No I won't.",
            "At the heart is the community, You!",
            "Polished because the owner is polish.",
            "Proudly developed in Poland! .....", // '.....' gets changed into the flag of poland at getRandomTagline()
            "To be fair, only Telerik has an unreasonable price.",
            "We appreciate every download!",
            "Thank you for being a part of CuoreUI.",
            "Guna, your charts look good!",
            "Nice website, Siticone, we like the UI.",
            "Xiaomi inspired some of the ui choices in CuoreUI!"
        ];
        
        taglines.push("There are " + (taglines.length + 1) + " unique taglines! Refresh the page for more..",);
        
        function getRandomTagline() {
            const randomIndex = Math.floor(Math.random() * taglines.length);
            let tagline = taglines[randomIndex];
        
            if (tagline.endsWith(".....")) {
                document.querySelector('.tagline').classList.add("polish-flag");
            }
            else
            {
                document.querySelector('.tagline').classList.remove("polish-flag");
            }
        
            return tagline.startsWith("(") ? tagline : "\"" + tagline + "\"";
        }
    

document.querySelector('.tagline').addEventListener('click', () => {
    document.querySelector('.tagline').innerText = getRandomTagline();
});


        // change p text to a random tagline
        document.querySelector('.tagline').innerText = getRandomTagline();
        
        let totalDownloads = undefined;
        
        async function getNuGetPackageDownloads(packageId) {
            // thanks to https://github.com/NuGet/Home/issues/2596#issuecomment-300068538
            const indexUrl = 'https://api.nuget.org/v3/index.json';
        
            try {
                // fetch service index to get search endpoint
                const indexResponse = await fetch(indexUrl);
                if (!indexResponse.ok) {
                    console.error(`error fetching service index: ${indexResponse.statusText}`);
                    return undefined;
                }
        
                const indexData = await indexResponse.json();
                const searchEndpoint = indexData.resources.find(resource => resource["@type"] === "SearchQueryService");
        
                if (!searchEndpoint) {
                    console.error('search query service endpoint not found');
                    return undefined;
                }
        
                // construct the query URL
                const url = `${searchEndpoint["@id"]}?q=packageid:${packageId}`;
                
                const response = await fetch(url);
                if (!response.ok) {
                    console.error(`error fetching ${packageId} response: ${response.statusText}`);
                    return undefined;
                }
                
                const data = await response.json();
                
                if (data.totalHits === 0 || data.data.length <= 0) {
                    console.log(`api returned no download data`);
                    return undefined;
                }
        
                if (data.data[0].totalDownloads < 0 || data.data[0].totalDownloads === undefined) {
                    console.log(`data reported wrong number of downloads`);
                    return undefined;
                }
        
                totalDownloads = data.data[0].totalDownloads;
                console.log(`fetched downloads count! ${totalDownloads} total downloads!`);

                const releaseDate = new Date(2024, 6, 4); // javascript i hate you so fucking much why does your month index start at 0
                const nowVersusThen = Date.now() - releaseDate;

                const millisecondsPerDay = 1000 * 60 * 60 * 24;  // milliseconds to days

                const daysSinceRelease = nowVersusThen / millisecondsPerDay;
                console.log(`${daysSinceRelease} days since release.`);

                perDayAverage = Math.floor(totalDownloads / daysSinceRelease);
                console.log(`${perDayAverage} per day average.`);

                return totalDownloads;
            } catch (error) {
                console.error(error);
            }
        }

        let perDayAverage = 0;
        
        let checkingRightNow = true;
        
        async function check() {
            let downloadsRightNow = await getNuGetPackageDownloads('CuoreUI.Winforms');
            // if a valid number is returned
            if (downloadsRightNow != undefined && downloadsRightNow > 0) {
                document.querySelector('.downloads-count').innerText = downloadsRightNow + " downloads on NuGet!" + ` ${perDayAverage} per day.`;
                clearInterval(getDownloadsTimer);
            } else {
                checkingRightNow = false;
                document.querySelector('.downloads-count').innerText = "We're working on getting the downloads, we promise!";
                console.log("You aren't offline by any chance are you..?");
            }
        }
        
        check();
        
        async function checkDownloadsUntilValid() {
            if (checkingRightNow) {
                return;
            }
        
            checkingRightNow = true;
            console.clear();
            let downloadsRightNow = await getNuGetPackageDownloads('CuoreUI.Winforms');
        
            // if a valid number is returned
            if (downloadsRightNow > 0 && downloadsRightNow != undefined) {
                document.querySelector('.download-counter').innerText = "The library has " + downloadsRightNow + " total downloads on NuGet!" + ` (${perDayAverage} per day average)`;
                clearInterval(getDownloadsTimer);
            } else {
                document.querySelector('.download-counter').innerText = "We're working on getting the downloads, we promise!";
                console.log("You aren't offline by any chance are you..?");
            }
        
            checkingRightNow = false;
        }
        
        // get total downloads for cui and display it when ready otherwise try to get downloads until we have it
        const getDownloadsTimer = setInterval(() => {
            checkDownloadsUntilValid();
        }, 500); // every half second

        </script>
</body>

</html>
